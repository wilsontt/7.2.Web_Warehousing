# 計畫文件 (PLAN): 登入後首頁 (Dashboard)

**文件版本**: v1.0.0
**狀態**: 草稿 (Draft)
**建立日期**: 2025-11-27
**依據**: `1.specs/2.登入首頁.spec.md`

---

## 1. 憲章遵循檢查 (Constitution Check)

| 原則 | 檢查項目 | 符合 | 說明 |
| :--- | :--- | :---: | :--- |
| **P0: SDD 流程** | 是否有對應的 Spec 文件？ | ✅ | 已建立 `1.specs/2.登入首頁.spec.md` |
| **P1: 簡潔優先** | 是否避免過度設計？ | ✅ | 採用模組化組件設計 (Layout, Header, Widgets)，保持結構清晰。 |
| **P2: 設計即安全** | 是否考量安全性？ | ✅ | 透過 `ProtectedRoute` 保護 Dashboard，且 Header 顯示登入者資訊。 |
| **P8: 一致體驗** | 是否符合設計規範？ | ✅ | 遵循 A/B 區佈局，使用 Tailwind CSS 實作響應式設計。 |

---

## 2. 技術架構 (Technical Architecture)

### 2.1 前端技術堆疊
- **Layout**: CSS Grid / Flexbox (A區 Header + B區 Main Content)
- **Icons**: `lucide-react`
- **Charts**: `recharts` (需安裝)
- **UI Components**: 自製 Tailwind Components (Card, Dropdown)

### 2.2 模組劃分
1.  **Layout**: `MainLayout` (負責整體結構)
2.  **Header**: `Header` (包含 Logo, Navigation, UserMenu)
3.  **Dashboard**: `Dashboard` (首頁容器)
4.  **Widgets**:
    - `TaskSummaryWidget` (今日任務)
    - `InventoryStatusWidget` (庫存概況)
    - `NotificationWidget` (最新通知)
    - `WarehouseInfoWidget` (倉庫資訊)
    - `ChartWidget` (圖表區)

---

## 3. 檔案變更 (File Changes)

### [MODIFY] src/components/layout/Header.tsx
- **目的**: 擴充 Header 功能。
- **變更**:
    - 實作「主選單」下拉功能 (8 大模組)。
    - 定義詳細的選單資料結構 (`NAVIGATION_ITEMS`)，包含多層級子選單。
    - 實作遞迴或多層級 Dropdown UI 以支援巢狀選單 (如：基本作業 -> 代碼作業 -> 基本代碼維護)。
    - 實作「語系切換」與「深淺色切換」UI (功能預留)。
    - 優化「使用者選單」下拉樣式。

### [NEW] src/components/layout/MainLayout.tsx
- **目的**: 定義全站主要佈局。
- **內容**:
    - 包含 `<Header />` (Sticky)。
    - 包含 `<main>` 內容區域 (Padding, Max-width)。

### [NEW] src/pages/Dashboard.tsx
- **目的**: 實作 Dashboard 首頁。
- **內容**:
    - 使用 Grid 佈局排列各個 Widgets。
    - 整合 Recharts 顯示圖表。

### [NEW] src/components/dashboard/*.tsx
- **目的**: 獨立各個 Widget 組件。
- **檔案**:
    - `StatCard.tsx` (通用統計卡片)
    - `RecentActivity.tsx` (最新通知)
    - `WarehouseTable.tsx` (倉庫資訊列表)

---

## 4. 驗證計畫 (Verification Plan)

### 4.1 自動化測試
- **Build Test**: 確保引入 `recharts` 後建置正常。

### 4.2 手動驗證
1.  **Layout 驗證**: Header 是否固定置頂？內容區是否正確縮放？
2.  **導覽列驗證**: 8 大模組選單是否可展開？RWD 手機版是否正常？
3.  **Dashboard 驗證**:
    - 卡片數據顯示是否正常？
    - 圖表是否能正確渲染？
    - 響應式佈局在不同尺寸下的表現。
