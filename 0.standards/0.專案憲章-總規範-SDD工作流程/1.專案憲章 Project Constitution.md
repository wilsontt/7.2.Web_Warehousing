# 專案憲章 Project Constitution：文件倉儲管理系統 
**版本 Version**：v2.3.0  
**核准日期 Ratified**：2025-11-09  
**最近修訂 Last Amended**：2025-11-28

#### 本文件闡述了`「文件倉儲管理系統」`專案的**不可協商原則**。所有規格文件、計畫與程式碼皆**必須嚴格遵循**下列規範。
#### This document outlines the non-negotiable principles for the `「文件倉儲管理系統」` project. All specifications, plans, and code **MUST adhere** to these rules.
---
> 你是設計開發及各種AI 應用的專家，也是專業的諮詢顧問，並協助企業導入各系統，及解決各種問題。

> 我是一家文件倉儲管理公司的IT工程師，我們公司有一套舊的Client-Server＋MSSQL架構的Windows系統，大約是20年前開發的，一直用到現在，雖然系統運作上是相當的穩定，但是終舊是20年前的架構，

> 因為我們現在的系統非常的龐大，而且系統已漸漸無法滿足我們的需求了，現在想要改版升級，重新開發一套Web版，需要將此專案拆分成數十個，甚至上百個大大小小的子專案，所以，我想以 SDD 規格驅動開發的方式來進行，先協助訂定這個專案的憲法，然後定義PRD的規格後，再產出Plan，然後再建立執行的任務Tasks，一步一步的來，這些都完成後，再來進行最後的開發。

> 這是目前的想法，不知道你還有沒有什麼建議與想法。
--- 
## 第一章：核心原則 (Core Principles)

### P0：所有專案遵循「規格驅動開發 (SDD)」流程：

1. Phase 1: 規格 (SPEC)
2. Phase 2: 計畫 (PLAN)
3. Phase 3: 任務 (Tasks)
4. Phase 4: 執行 (EXECUTE)
5. Phase 5: 驗收 (REVIEW)

### P1：簡潔優先於複雜 (Simplicity over Complexity)

**規範**：我們必須偏好**清晰、簡單、直接**的解決方案，而非複雜或「巧妙」的做法。若複雜性不可避免，必須在設計與實作計畫中提供充分的**理由與文件化說明**。
**原由**：簡單的系統更容易開發、測試、維護、安全與除錯。

### P2：設計即安全 (Security by Design)

**規範**：安全性是**基本且不可協商**的設計要求。所有設計**必須從一開始就考量安全性**。
1.  **身份驗證 (Authentication)**：**必須**使用統一的身份驗證提供者 (IdP)，採用 `[OIDC / OAuth 2.0]` 協議。
2.  **授權 (Authorization)**：**必須**採用集中式的「角色基礎存取控制 (RBAC)」。
3.  **合規性 (Compliance)**：所有涉及文件存取、修改、刪除的操作，**必須**產生不可否認的稽核日誌 (Audit Log)，以符合 `[ISO 27001:2022]` 的要求。
4.  **數據加密 (Encryption)**：敏感文件**必須**在儲存時 (at-rest) 和傳輸時 (in-transit) 全程加密。

**原由**：確保資料的**完整性、機密性與可用性**是我們的首要責任。

### P3：清晰與可測試性 (Clarity and Testability)

**規範**：所有工作必須**可驗證且可測試**。  
1. 規格文件（`spec.md`）中，每個使用者故事（user story）必須具有明確、可測試的驗收條件。  
2. 程式碼必須撰寫為**可進行單元測試與整合測試**。

**原由**：無法測試的程式即無法驗證，且很快會成為技術負債。

### P4：漸進式價值交付 (Incremental Value Delivery)

**規範**：必須以**小型、可驗證且獨立的增量**交付價值，並直接對應使用者故事。所有任務（`tasks.md`）都必須可追溯至規格文件（`spec.md`）中的特定使用者故事。
**原由**：確保每項工作可測試、可部署、具明確價值。

### P5：主要語言（zh-TW） (Primary Language)

**規範**：所有專案產出物（包括 `spec.md`、`plan.md`、`README.md`、使用者文件、程式碼註解、Git Commit Message）**必須**使用**正體中文（zh-TW）**撰寫。**禁止**使用英文或其他語言撰寫註解或說明文件。
**原由**：確保專案文件對所有團隊成員與利害關係人具備一致性與可理解性，並符合在地化需求。

---

## 第二章：設計與品質原則 (Design & Quality Principles)

### P6：程式碼品質標準 (Code Quality Standards)

**規範**：程式碼必須遵循既定的風格與最佳實踐（如 lint 規則、格式化、變數命名一致性），且所有程式碼在合併前**必須經由程式碼審查（code review）**。
**原由**：確保長期可讀性、降低錯誤率並簡化新進開發者的上手過程。

### P7：嚴謹測試標準 (Rigorous Testing Standards)

**規範**：所有新功能必須具備相應的測試（單元測試、整合測試或端對端測試），測試的範圍與類型必須記載於 `plan.md` 文件中。
**原由**：確保功能符合預期、防止回歸錯誤、並支援安全的重構。

### P8：一致的使用者體驗 (User Experience Consistency)

**規範**：所有使用者介面與互動行為必須維持**一致的設計語言與操作模式**。
1.  **必須**使用一套統一的設計系統（Design System）和共用組件庫。
2.  若有新增的 UI/UX 模式，必須在 `spec.md` 中提供充分的**理由與文件化說明**。
3.  **(新增條款)** **明確的交易儲存 (Explicit Save)**：所有資料異動（新增、修改、刪除、停用）**不得**採用即時儲存 (Auto-Save)。**必須**提供「儲存」或「確認」按鈕，並搭配「取消」按鈕，由使用者明確觸發，以批次 (Batch) 方式提交變更。

**原由**：提供專業、一致且易於使用的介面，降低使用者混淆與技術支援負擔。確保資料交易的完整性，防止使用者誤操作。

### P9：效能要求 (Performance Requirements)

**規範**：所有與效能相關的非功能性需求（例如回應時間、資源使用量）必須在 `spec.md` 中明確定義，特別是針對效能關鍵功能。
**原由**：確保系統在負載下仍維持**高回應性、可擴充性與穩定性**。

---

## 第三章：架構與技術原則 (Architecture & Technology Principles)

### P10：架構設計 (Architectural Design)

**規範**：
1.  **領域驅動設計 (DDD)**：嚴格遵循 DDD 方法論。所有「子專案」必須基於「有界上下文 (Bounded Context)」進行劃分。
2.  **架構模式 (Pattern)**：採用「模組化單體 (Modular Monolith)」架構，確保模組間界線清晰。未來僅在必要時，經批准後方可將特定模組拆分為微服務。
3.  **非同步通訊 (Async Communication)**：對於非即時性的跨模組操作，**必須** 使用事件/訊息佇列進行非同步處理。

**原由**：建立一個高內聚、低耦合、可演進的系統架構，避免未來陷入新的「巨石泥沼」。

### P11：技術堆疊 (Technology Stack)

**規範**：所有子專案**必須**在以下指定的技術堆疊內開發，任何例外**必須**依照「第 H1 條：修訂程序」提出。
1.  **前端 UI/UX**：`[例如：原生支援 Tailwind CSS  ＋ Next.js 14+ / React 18+ ＋ Typescript ＋ 響應式設計]`
2.  **後端 (API)**：`[ASP.NET Core 8+ WebAPI / C# 12 / Python]`
3.  **資料庫**：`[MS SQL Server 2022+]`
4.  **API 規格**：`[RESTful (OpenAPI 3.x)]`
5.  **緩存 (Caching)**：`[Redis]`
6.  **容器化**：`[Docker]`

**原由**：統一技術堆疊可降低維護、安全和人員培訓的複雜性與成本。

### P12：數據治理 (Data Governance)

**規範**：
1.  **單一事實來源 (SSoT)**：每個數據實體**必須**有唯一的「擁有者」模組，**禁止**跨模組直接存取資料庫。
2.  **資料庫變更 (Schema Change)**：**禁止**手動變更生產資料庫。所有 Schema 變更**必須**透過資料庫遷移工具（例如 `Entity Framework Core Migrations`）以程式碼形式管理。

**原由**：確保資料一致性，並使資料庫結構的演進可追蹤、可審核、可重複。

### P13：可觀測性 (Observability)

**規範**：所有模組**必須**提供可觀測性支持。
1.  **日誌 (Logging)**：**必須**使用結構化日誌 (Structured Logging)，並將日誌統一發送到中央日誌系統。
2.  **指標 (Metrics)**：**必須**暴露標準化的健康檢查 (Health Check) 端點和關鍵效能指標。
3.  **追蹤 (Tracing)**：跨模組的 API 呼叫**必須**實作分佈式追蹤 (Distributed Tracing)。

**原由**：確保系統在發生問題時，具備快速定位和診斷問題的能力。

### P14：文件產出規範 (Documentation Standards)

**規範**：所有專案文件**必須**遵循統一的格式與結構規範，確保文件的一致性與可維護性。

1. **README.md 產出規範**：
   - **語言要求**：所有 README.md 檔案**必須**使用正體中文（zh-TW）撰寫（遵循 P5）。
   - **結構要求**：所有 README.md 檔案**必須**遵循 `0.standards/README徽章使用規範.md` 中定義的格式與結構規範。
   - **內容要求**：
     * **根目錄 README.md**：**必須**包含專案概述、技術堆疊、快速開始、開發流程、核心原則等章節。
     * **子專案 README.md**（如 `frontend/README.md`、`backend/README.md`）：**必須**包含該子專案的技術堆疊、專案結構、開發指令、環境變數、開發規範等章節。
     * **模組 README.md**（如 `1.specs/README.md`、`docs/README.md`）：**必須**包含該模組的概述、文件結構、使用說明等章節。
   - **徽章規範**：所有 README.md 檔案**必須**遵循 `0.standards/README徽章使用規範.md` 中定義的徽章格式與排列規範。
   - **更新要求**：當專案版本、技術堆疊、或重要資訊變更時，**必須**同步更新對應的 README.md 檔案。

2. **SDD 文件產出規範**：
   - 所有 `spec.md`、`plan.md`、`tasks.md`、`review.md` 檔案**必須**遵循 `3.規格驅動開發 (SDD) 工作流程.md` 中定義的範本與結構。

**原由**：統一的文件格式與結構有助於提升文件的可讀性、可維護性與可追溯性，降低新進開發者的學習成本，並確保專案知識的完整性與一致性。

---

## 第四章：治理 (Governance)

### H1：修訂程序 (Amendment Process)

**規範**：任何對本憲章的修改必須透過 **Pull Request** 提出，並經**專案負責人核准**。每次修訂均需更新版本號。

### H2：版本管理 (Versioning)

- **主版號（MAJOR，例如 v2.0.0）**：刪除原則、新增「章節」（例如 `第三章`），或進行不相容的治理變更。
- **次版號（MINOR，例如 v2.1.0）**：新增新原則（例如 `P14`） 或對現有原則增加具約束力的內容。
- **修補版（PATCH，例如 v2.0.1）**：修正文法、用詞或非語義性微調。

### H3：合規要求 (Compliance)

**規範**：所有功能計畫文件（`plan.md`）必須包含一個「**憲章遵循檢查（Constitution Check）**」章節，以明確驗證該計畫是否遵守本憲章所有現行的原則。

### H4：驗收報告要求 (Acceptance Report Requirements)

**規範**：Phase 4（執行階段）的所有任務完成後，**必須**建立對應的驗收報告，以確保任務完成狀態、驗收條件、測試結果都有完整的文件記錄。

1. **報告存放位置**：
   - 所有驗收報告**必須**存放在 `系統建置與驗證報告/` 資料夾下
   - 報告**必須**按階段分類存放於對應的子資料夾（例如：`階段1-基礎建設與核心功能/`）

2. **報告命名規則**：
   - 檔案命名格式：`{任務編號}-{任務名稱}-驗收報告.md`
   - 範例：`T-1-1-1-建立專案結構-驗收報告.md`

3. **報告內容要求**：
   每個驗收報告**必須**包含以下章節：
   - **任務概述**：任務編號、名稱、執行日期、執行人員、狀態
   - **執行內容**：詳細的實作內容
   - **驗收條件檢查**：逐項檢查驗收條件，標註通過（✅）或未通過（❌）
   - **測試結果**：測試執行結果與測試覆蓋率
   - **交付成果**：完成的工作項目清單
   - **相關文件**：相關的設計與任務文件連結
   - **備註**：其他說明事項
   - **驗收狀態**：通過/未通過、驗收日期、驗收人員

4. **報告建立時機**：
   - 驗收報告**必須**在任務完成後立即建立
   - 驗收報告**必須**在任務狀態更新為「已完成」時同步建立

5. **報告追溯性**：
   - 驗收報告**必須**可追溯至 `tasks.md` 中的對應任務
   - 驗收報告**必須**可追溯至 `plan.md` 中的相關設計章節
   - 驗收報告**必須**可追溯至 `spec.md` 中的相關使用者故事

6. **README.md 更新要求**：
   - 建立驗收報告後，**必須**同步更新 `系統建置與驗證報告/README.md` 文件
   - 在「已完成任務」章節中標記對應任務為已完成（✅）
   - 確保「已完成任務」章節與實際驗收報告狀態一致
   - 更新「最後更新」日期

7. **階段完成總結要求**：
   - 當一個階段的所有任務完成後，**必須**建立「階段完成總結」文件
   - **文件命名格式**：`階段{N}-{階段名稱}-完成總結.md`
   - **文件存放位置**：`系統建置與驗證報告/階段{N}-{階段名稱}/階段{N}完成總結.md`
   - **文件內容要求**：
     - **階段概述**：階段目標、對應文件（plan.md、使用者故事）、預估時程、里程碑
     - **完成任務清單**：按工作項目分類，列出所有已完成任務（任務編號、任務名稱、狀態）
     - **交付成果總結**：階段完成的主要交付成果
     - **測試結果總結**：整體測試結果、測試覆蓋率、測試通過率
     - **遇到的問題與解決方案**：記錄階段執行過程中遇到的主要問題與解決方法
     - **後續改進建議**：針對本階段成果的改進建議與未來優化方向
     - **階段總結**：階段完成狀態、達成目標評估、對專案整體進度的貢獻
   - **建立時機**：
     - 階段內所有任務的驗收報告都完成後立即建立
     - **必須**在階段完成後 3 個工作天內建立
   - **README.md 更新**：
     - 建立階段完成總結後，**必須**更新 `系統建置與驗證報告/README.md`
     - 在對應階段的「已完成任務」章節中標記為「✅ **階段 {N} 已完成**（詳見 `階段{N}-{階段名稱}/階段{N}完成總結.md`）」
     - 更新「最後更新」日期

**原由**：確保專案執行過程的完整可追溯性，支援專案審計與品質保證，符合 ISO 27001:2022 的文件化要求。同步更新 README.md 可確保文件狀態的一致性，便於專案進度追蹤與管理。階段完成總結文件提供階段性的成果檢視與經驗總結，有助於專案知識管理與持續改進。