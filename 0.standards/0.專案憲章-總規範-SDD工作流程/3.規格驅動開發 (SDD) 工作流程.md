# 規格驅動開發 (SDD) 工作流程
# 暨 核心文件範本 (Templates)

**文件版本**: v1.0.0
**流程制定者**: 專案顧問 (Gemini)
**依據憲章**: `1.專案憲章 Project Constitution.md`

## 流程總覽 (Process Overview)

本流程旨在將「文件倉儲管理系統 2.0」的開發工作，依據「專案憲章」拆分為數個獨立的「模組開發迭代 (Module Iteration)」。

在 `0.standards/0.專案憲章-總規範-SDD工作流程/2.文件倉儲管理系統 Warehouse Management System 設計規範v2.0.md` 中定義的 8 個主要功能選單（如：「1.基本作業」、「2.例行作業」等），將被視為 8 個獨立的「有界上下文 (Bounded Context)」，並成為 8 次主要的開發迭代。

### 檔案目錄結構規範（新增 2025/11/28）
為確保專案結構的一致性，所有產出文件必須依據 **8大核心功能** 分類存放：

- `1.specs/`, `2.plans/`, `3.tasks/`, `4.reviews/` 四個目錄下，皆須包含以下子目錄：
  1. `1.基本作業/`
  2. `2.例行作業/`
  3. `3.庫存作業/`
  4. `4.客戶作業/`
  5. `5.移儲作業/`
  6. `6.稽核作業/`
  7. `7.倉儲管理作業/`
  8. `8.系統管理作業/`
- **規則**：所有模組的 spec, plan, tasks, review 文件，**必須** 存放於對應功能的子目錄中，不得直接置於根目錄（共用或特殊模組除外，如：登入作業）。

每一次迭代都必須嚴格遵循以下五個階段：

1.  **Phase 1: 規格 (SPEC)** - `[功能目錄]/[模組名稱].spec.md`
2.  **Phase 2: 計畫 (PLAN)** - `[功能目錄]/[模組名稱].plan.md`
3.  **Phase 3: 任務 (Tasks)** - `[功能目錄]/[模組名稱].Tasks.md`
4.  **Phase 4: 執行 (EXECUTE)** - ( implement & Code) 
5.  **Phase 5: 驗收 (REVIEW)** - `[功能目錄]/[模組名稱].REVIEW.md`

---

### 主題一致性稽核（新增 2025/11/16）
- 在 Phase 4 每個畫面完成後，必須執行「深/淺色主題一致性檢查」：
  - 範圍：頂部導覽列、主選單與其下拉面板、主要內容區、表格/分頁、對話框與彈出式面板。
  - 驗收：切換主題時，上述區塊的背景、字色、邊框、hover/selected/focus/disabled 狀態均正確套用 `dark:` 對應，對比度達 WCAG AA。
- 在 Phase 5 驗收中加入「主題切換 E2E 測試」與「DataTable 分頁資訊 full/compact/auto 模式」視覺一致性檢查。

## Phase 1: 規格 (SPEC) - 定義「做什麼」

**目標**: 產出一份清晰、可測試、無歧義的「產品需求文件 (PRD)」。
**產出**: `[模組名稱].spec.md`

> **顧問註記**: 這是專案的「需求基石」。這份文件將凍結(Sign-off)該模組的範疇 (Scope)。

### `[模組名稱].spec.md` 範本

```markdown
# 規格文件 (SPEC): [模組名稱，例如：1. 基本作業]
**版本**: 1.0
**狀態**: [草稿 | 審核中 | 已核准]
**負責人**: [產品經理或您]

## 1. 模組概述 (Overview)
(描述此模組的核心目的。例如：本模組負責管理系統運作所需的所有基礎資料，包含客戶、倉庫、車輛等。)

## 2. 功能清單與使用者故事 (Features & User Stories)
(此處應將 `0.1.主選單功能清單.md` 的舊功能，轉化為新系統的故事)

### 2.1 [功能子項，例如：客戶基本資料維護]
**使用者故事 (User Story)**:
- **身為** [角色，例如：系統管理員]
- **我想要** [操作，例如：新增、修改、查詢客戶基本資料]
- **以便** [目的，例如：讓系統能正確識別客戶身份與收費標準]

**驗收條件 (Acceptance Criteria) - [憲章 P3, P7]**:
- [ ] **(驗證規則)** 必須符合 `standards/2.文件倉儲管理系統 Warehouse Management System 設計規範v2.0.md` 中的所有驗證規則（例如 EMAIL 格式、必填欄位）。
- [ ] **(UI 規範)** 介面必須採用 `standards/2.文件倉儲管理系統 Warehouse Management System 設計規範v2.0.md` 定義的 Master-Detail 佈局 與 ResizableLayout。
- [ ] **(功能)** 按下「停用」按鈕時，該客戶資料應被標記為停用，但不應從資料庫刪除。
- [ ] **(安全)** 只有具備「客戶維護」權限的角色才能看到「新增」、「修改」按鈕。

### 2.2 [下一個功能子項...]

## 3. 非功能性需求 (Non-Functional Requirements)
- **效能 (憲章 P9)**: 左側客戶列表的搜尋回應時間不得超過 2 秒。
- **安全 (憲章 P2, P5)**: 所有對客戶資料的 CUD (Create/Update/Delete) 操作，皆須產生稽核日誌。
- **語言 (憲章 P5)**: 所有介面文字、錯誤訊息**必須**提供正體中文（zh-TW）。

## 4. 模組依賴性 (Dependencies)
(描述此模組需要依賴哪些其他模組的資料)
- 例如：`客戶使用者維護` 功能依賴 `權限維護` 模組產出的「使用者群組」。
